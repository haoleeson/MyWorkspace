layout: post
title: OSI七层网络模型
date: 2021/7/20 22:30:45
updated: 2021/7/20 22:10:45
comments: true
tags:
- Network
categories:
- 技术

---

# 1. OSI网络模型优势
- 定义了模型每层执行的功能功能，促成行业网络组件标准化，让满足模型的不同类型网络硬件和软件能够彼此通信，也能让各厂商能够协作开发
- 将网络通信过程划分成更小、更简单的组件，这有助于组件的开发、设计和故障排除
- 避免让对一层的修改影响其他层，从而避免妨碍开发工作

<!-- more -->

# 2. OSI七层网络模型

<table  border="1" cellspacing="1" style="border: 1ps dotted #666" >
    <tr>
        <th>层级</th>
        <th>OSI模型层级</th>
        <th>功能</th>
        <th>说明</th>
    </tr>
    <tr>
        <td align="center">7</td>
        <td align="center">应用层</td>
        <td>针对特定应用的协议</td>
        <td>电子邮件协议、远程登录协议、文件传输协议...</td>
    <tr>
        <td align="center">6</td>
        <td align="center">表示层</td>
        <td>设备固有数据格式与网络标准数据格式的转换</td>
        <td>将接收到的不同表现形式的信息。<br>如文字流、图像、声音等，转换为网络标准格式</td>
    </tr>
    <tr>
        <td align="center">5</td>
        <td align="center">会话层</td>
        <td>通信管理，负责建立和断开通信连接；<br>管理传输层以下的分层</td>
        <td>何时建立、断开连接，以及连接保持多久</td>
    </tr>
    <tr>
        <td align="center">4</td>
        <td align="center">传输层</td>
        <td>管理两个节点间数据传输。负责可靠传输<br>（确保数据被可靠地传送到目标地址）</td>
        <td>确保无数据丢失</td>
    </tr>
    <tr>
        <td align="center">3</td>
        <td align="center">网络层</td>
        <td>地址管理与路由选择</td>
        <td>明确经过哪些路由传递数据到目标地址</td>
    </tr>
    <tr>
        <td align="center">2</td>
        <td align="center">数据链路层</td>
        <td>互连设备之间传送和识别数据帧</td>
        <td>比特流与数据帧之间的转换</td>
    </tr>
    <tr>
        <td align="center">1</td>
        <td align="center">物理层</td>
        <td>以电压的高低、灯光的闪灭代表"0"、"1"。<br>界定连接器和网线的规格</td>
        <td>电子信号与比特流之间的转换</td>
    </tr>
</table>

## 2.1. 物理层
负责发送和接收"0"、"1"比特功能。物理层直接与各种通信介质交流。不同类型的介质以不同方式表示比特值，如光的闪灭，电压高低或状态的切换一一从高电平变成低电平以及从低电平变成高电平。对于每种类型的介质，都需要特定的协议，这些协议描述了正确的比特模式、如何将数据编码成介质信号以及物理介质连接头的各种特征

## 2.2. 数据链路层
负责数据的物理传输，并处理错误通知、网络拓扑和流量控制功能。这意味着数据链路层需确保报文被传输到LAN中的正确设备（使用硬件地址），也能把来自网络层的报文转换为比特，以供物理层传输

数据链路层使用硬件地址，以便主机能够给本地网络中的其他主机发送分组以及穿越路由器发送分组。每当在路由器之间传输分组时，分组都将被封装成帧，而接收路由器会将这些信息剥离，只保留完整的原始分组。在每一跳都将重复这种将分组封装成帧的过程，直到分组最终到达目的接收机。注意，在整个传输过程中，分组本身从未被修改过，而只是被必要的控制信息封装，以便能够通过不同的介质进行传输

IEEE 以太网数据链路层包含两个子层，如下：
- **介质访问控制子层 (MAC，802.3)**：它定义了如何通过介质传输分组。它采用"先到先服务"的访问方式，带宽由大家共享，因此称为竟用介质访问（contention media access）。 这个子层定义了物理地址和逻辑拓扑。其中，逻辑拓扑指信号在物理拓扑中的传输路径。在这个子层，还可使用线路控制、错误通知(不纠错)、顺序传递帧以及可选的流量控制
- **逻辑链路控制子层 (LLC，802.2)**：负责识别网络层协议并对其进行封装。 LLC报头说明数据链路层收到帧后如何对分组进行处理。其工作原理类似于：收到帧后，主机查看LLC报头以确定要将分组交给谁一一如网络层的IP协议 。LLC还可提供流量控制以及控制比特排序

## 2.3. 网络层
负责将分组数据从源端传输到目的端。功能：为网络设备提供逻辑地址；进行路由选择和分组转发，即管理设备编址、跟踪设备在网络中的位置并确定最佳的数据传输路径

**流程：**
1. 在其接口上收到分组后，路由器首先检查分组的目标F地址
2. 若分组目的地是当前路由，则将分组封装成帧后在本地网络中传输
3. 若分组目的地不是当前路由器，路由器将在路由选择表中查找目标网络地址对应端口
4. 若找不到目标网络对应的记录，则丢弃分组
5. 若能找到目标网络对应的记录，则将分组发送到该记录中的端口

## 2.4. 传输层
传输层将数据进行分段并重组为数据流。位于传输层的服务将来自上层应用的数据进行分段和重 组，并将它们合并到同一个数据流中。它们提供了端到端的数据传输服务，并可在互联网络上的发送 主机和目标主机之间建立逻辑连接

传输层负责提供如下机制:对上层应用程序进行多路复用、建立会话以及拆除虚电路。它还提供 透明的数据传输，从而对高层隐藏随网络而异的信息

在传输层，可使用术语可靠的联网，这意味着将使用确认、排序和流量控制

## 2.5. 会话层
会话层负责建立、维护、管理应用程序之间的会话。它协调和组织系统之间的通信，为此提供了 3种不同的模式:单工、半双工和全双工。总之，会话层的基本功能是将不同应用程序的数据分离

## 2.6. 表示层
它向应用层提供数据，并负责数据转换和代码格式化

从本质上说，该层是一个转换器，提供编码和转换功能。一种成功的数据传输方法是，将数据转 换为标准格式再进行传输。计算机被配置成能够接受这种通用格式的数据，然后将其转换为本机格式 以便读取(例如，从 EDCDIC 转换为 ASCII )。通过提供转换服务，表示层能够确保从一个系统的应 用层传输而来的数据可被另一个系统的应用层读取

OSI 制定了相关的协议标准，这些标准定义了如何格式化标准数据。诸如数据压缩、解压缩、加密和解密等任务都与表示层有关。有些表示层标准还涉及多媒体操作

## 2.7. 应用层
为用于通信的应用程序和用于消息传输的底层网络提供接口，组成一个信息报文，实际上，应用层让应用程序能够将信息沿协议横向下传输，从而充当了应用程序和下一层之间的接口

# 3. TCP/IP协议簇和OSI模型的对应关系

<table width="300" border="1" cellspacing="1" style="border: 1ps dotted #666" >
    <tr>
        <th>DoD模型</th>
        <th>OSI模型</th>
    </tr>
    <tr>
        <td  align="center" rowspan="3">进程/应用层</td>
        <td align="center">应用层</td>
    </tr>
    <tr>
        <td align="center">表示层</td>
    </tr>
    <tr>
        <td align="center">会话层</td>
    </tr>
    <tr>
        <td align="center">主机到主机层</td>
        <td align="center">传输层</td>
    </tr>
    <tr>
        <td align="center">因特尔层</td>
        <td align="center">网络层</td>
    </tr>
    <tr>
        <td  align="center" rowspan="2">网络接入层</td>
        <td align="center">数据链路层</td>
    </tr>
    <tr>
        <td align="center">物理层</td>
    </tr>
</table>

# 4. TCP/IP协议簇

<table  border="1" cellspacing="1" style="border: 1ps dotted #666" >
    <tr>
        <th>DoD模型</th>
        <th>协议</th>
        <th>说明</th>
    </tr>
    <tr>
        <td rowspan="10">进程/应用层</td>
        <td align="center">Telnet</td>
        <td>远程终端协议，远程登录并控制服务器的协议，SSH</td>
    </tr>
    <tr>
        <td align="center">DNS</td>
        <td>将域名转换为IP地址的协议，基于TCP/UDP，53端口</td>
    </tr>
    <tr>
        <td align="center">HTTP</td>
        <td>超文本传输协议，是一个简单的请求-响应协议，基于TCP/TLS</td>
    </tr>
    <tr>
        <td align="center">FTP</td>
        <td>20/21 文件传输协议，20用于传输数据，21用于传输控制信息</td>
    </tr>
    <tr>
        <td align="center">LPD</td>
        <td>等待接受客户使用行式打印机远程协议传来的打印工作的协议</td>
    </tr>
    <tr>
        <td align="center">SNMP</td>
        <td>简单网络管理协议，用于管理服务器、工作站、路由器、交换机和HUBS等，通常使用UDP</td>
    </tr>
    <tr>
        <td align="center">TFTP</td>
        <td>在客户机与服务器之间进行简单文件传输的协议，基于UDP实现，端口69</td>
    </tr>
    <tr>
        <td align="center">DHCP</td>
        <td>动态主机设置协议，基于UDP</td>
    </tr>
    <tr>
        <td align="center">SMTP</td>
        <td>建模在FTP文件传输服务上的一种邮件服务，主要用于传输系统之间的邮件信息并提供来信有关的通知</td>
    </tr>
    <tr>
        <td align="center">NFS</td>
        <td>UNIX表示层协议(presentation layer protocol)，能使使用者访问网络上别处的文件就像在使用自己的计算机一样</td>
    </tr>
    <tr>
        <td rowspan="2">主机到主机层</td>
        <td align="center">TCP</td>
        <td>面向连接的、可靠的、基于字节流的传输层通信协议</td>
    </tr>
    <tr>
        <td align="center">UDP</td>
        <td>用户数据报协议，提供了一种无需建立连接就可以发送封装的IP数据包的方法</td>
    </tr>
    <tr>
        <td rowspan="4">因特网层</td>
        <td align="center">ICMP</td>
        <td>互联网控制消息协议，ICMP 依靠IP来完成它的任务，它是IP的主要部分。<br>其通常不由网络程序直接使用，除了ping和traceroute这两个特别的例子</td>
    </tr>
    <tr>
        <td align="center">ARP</td>
        <td>地址解析协议， 用于实现从 IP 地址到 MAC 地址的映射，即询问目标IP对应的MAC地址</td>
    </tr>
    <tr>
        <td align="center">RARP</td>
        <td>反地址解析协议</td>
    </tr>
    <tr>
        <td align="center">IP</td>
        <td>提供了不可靠，无连接的数据报传送服务。基本功能：寻址、分片。</td>
    </tr>
    <tr>
        <td rowspan="4">网络接入层</td>
        <td align="center">以太网</td>
        <td>属网络低层协议，通常在OSI模型的物理层和数据链路层操作。完成网络传输控制任务</td>
    </tr>
    <tr>
        <td align="center">快速以太网</td>
        <td>一种局域网（LAN）传输标准，它提供每秒100兆的数据传输率（100BASE-T）</td>
    </tr>
    <tr>
        <td align="center">令牌环</td>
        <td>令牌环协议是令牌环网（一种以环形网络拓扑结构为基础发展起来的局域网）的协议，谁有令牌谁就有传输权限</td>
    </tr>
    <tr>
        <td align="center">FDDI</td>
        <td>光纤数据在200公里内局域网内传输的标准，基于令牌环协议。支持长距离传输，支持多用户。<br>FDDI用于环型网数据传输速率可达100Mbit/s</td>
    </tr>
</table>

